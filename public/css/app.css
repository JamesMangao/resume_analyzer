:root {
  --bg:#0b0f1a;--surface:#111827;--surface2:#1a2235;--border:rgba(255,255,255,0.07);
  --text:#e8eaf0;--muted:#6b7a99;--accent:#4f8ef7;--green:#34d399;--amber:#fbbf24;
  --rose:#f87171;--lavender:#a78bfa;--teal:#2dd4bf;--glow:0 0 40px rgba(79,142,247,0.15);
}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'Syne',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;background-image:linear-gradient(rgba(79,142,247,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(79,142,247,0.03) 1px,transparent 1px);background-size:40px 40px}

/* ── LOADING ─────────────────────────────────────────────────── */
#loading{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;gap:20px;transition:opacity .5s,visibility .5s}
#loading.hidden{opacity:0;visibility:hidden}
.loader-logo{font-size:2.2rem;font-weight:800;letter-spacing:-.03em;background:linear-gradient(135deg,var(--accent),var(--lavender));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.loader-bar{width:180px;height:2px;background:var(--surface2);border-radius:99px;overflow:hidden}
.loader-bar::after{content:'';display:block;height:100%;width:40%;background:linear-gradient(90deg,var(--accent),var(--lavender));border-radius:99px;animation:loadSlide 1.2s ease-in-out infinite}

/* ── ANIMATIONS ──────────────────────────────────────────────── */
@keyframes loadSlide{0%{transform:translateX(-100%)}100%{transform:translateX(350%)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(30px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes pageIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes modalIn{from{opacity:0;transform:scale(.92) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes toastIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
@keyframes toastOut{to{opacity:0;transform:translateX(20px)}}
@keyframes heartBeat{0%{transform:scale(1)}40%{transform:scale(1.4)}70%{transform:scale(.9)}100%{transform:scale(1)}}
@keyframes slideDown{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(.85)}}
@keyframes overlayFadeIn{from{opacity:0}to{opacity:1}}
@keyframes expandCardIn{from{opacity:0;transform:scale(.88) translateY(24px)}to{opacity:1;transform:scale(1) translateY(0)}}

/* ── JOURNAL EXPAND OVERLAY ──────────────────────────────────── */
.journal-expand-overlay{position:fixed;inset:0;background:rgba(11,15,26,0);z-index:300;display:none;align-items:center;justify-content:center;padding:24px}
.journal-expand-overlay.open{display:flex;background:rgba(11,15,26,.92);animation:overlayFadeIn .3s ease both}
.journal-expanded-card{background:var(--surface);border:1px solid rgba(79,142,247,.25);border-radius:20px;max-width:680px;width:100%;max-height:88vh;display:flex;flex-direction:column;box-shadow:0 0 80px rgba(79,142,247,.12),0 40px 80px rgba(0,0,0,.6);animation:expandCardIn .38s cubic-bezier(.34,1.4,.64,1) both;overflow:hidden}
.expanded-card-header{padding:24px 28px 18px;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;justify-content:space-between;gap:16px;flex-shrink:0;background:linear-gradient(135deg,rgba(79,142,247,.06),rgba(167,139,250,.04))}
.expanded-card-title{font-size:1.25rem;font-weight:800;letter-spacing:-.03em;line-height:1.3;flex:1}
.expanded-card-meta{display:flex;align-items:center;gap:10px;margin-top:6px}
.expanded-card-date{font-family:'JetBrains Mono',monospace;font-size:.62rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em}
.expanded-mood-badge{font-size:1.3rem;line-height:1}
.expanded-close-btn{background:var(--surface2);border:1px solid var(--border);color:var(--muted);cursor:pointer;font-size:.9rem;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:color .2s,background .2s,border-color .2s;flex-shrink:0}
.expanded-close-btn:hover{color:var(--rose);border-color:var(--rose);background:rgba(248,113,113,.08)}
.expanded-card-body{padding:24px 28px;overflow-y:auto;flex:1}
.expanded-card-content{font-family:'Newsreader',serif;font-size:1rem;line-height:1.85;color:rgba(232,234,240,.85);font-weight:300;white-space:pre-wrap;word-break:break-word}
.expanded-photos{display:flex;gap:10px;flex-wrap:wrap;margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}
.expanded-photo{width:120px;height:120px;border-radius:10px;object-fit:cover;border:1px solid var(--border);cursor:pointer;transition:transform .2s,border-color .2s}
.expanded-photo:hover{transform:scale(1.04);border-color:var(--accent)}
.expanded-tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}
.expanded-card-footer{padding:16px 28px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:flex-end;gap:10px;flex-shrink:0;background:var(--surface2)}

/* ── JOURNAL ENTRIES ─────────────────────────────────────────── */
.journal-entry{padding:18px;background:var(--surface2);border-radius:12px;margin-bottom:12px;border:1px solid var(--border);transition:border-color .2s,transform .2s,box-shadow .2s;cursor:pointer;position:relative;user-select:none}
.journal-entry:hover{border-color:rgba(79,142,247,.35);transform:translateX(4px) scale(1.01);box-shadow:0 4px 24px rgba(79,142,247,.1)}
.journal-entry-actions{display:flex;align-items:center;gap:4px}
.journal-entry-actions button{background:none;border:none;color:var(--muted);cursor:pointer;font-size:.8rem;padding:5px 7px;border-radius:6px;transition:color .2s,background .2s;line-height:1}
.journal-entry-actions button:hover{color:var(--accent);background:rgba(79,142,247,.1)}
.journal-entry-actions button.del-btn:hover{color:var(--rose);background:rgba(248,113,113,.1)}
.entry-expand-hint{font-size:.6rem;color:var(--muted);font-family:'JetBrains Mono',monospace;opacity:.5;margin-top:8px;letter-spacing:.05em}
.entry-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:10px;gap:8px}
.entry-date{font-family:'JetBrains Mono',monospace;font-size:.65rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em}
.mood-emoji{font-size:1.1rem}
.entry-preview{font-family:'Newsreader',serif;font-size:.9rem;color:rgba(232,234,240,.7);line-height:1.6;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-weight:300}
.entry-tags{display:flex;gap:6px;margin-top:10px;flex-wrap:wrap}
.tag{font-family:'JetBrains Mono',monospace;font-size:.58rem;padding:2px 8px;border-radius:4px;text-transform:uppercase;letter-spacing:.08em}

/* ── MOBILE HAMBURGER ────────────────────────────────────────── */
.hamburger{display:none;position:fixed;top:14px;left:14px;z-index:52;background:var(--surface);border:1px solid var(--border);border-radius:10px;width:40px;height:40px;align-items:center;justify-content:center;cursor:pointer;flex-direction:column;gap:5px;padding:10px;transition:all .25s}
.hamburger:hover{border-color:var(--accent)}
.hamburger span{display:block;width:18px;height:1.5px;background:var(--text);border-radius:2px;transition:all .25s}
.hamburger.open{opacity:0;pointer-events:none;transform:scale(0.8)}
.sidebar-overlay{display:none;position:fixed;inset:0;background:transparent;z-index:49}
.sidebar-overlay.open{display:block}

/* ── LAYOUT ──────────────────────────────────────────────────── */
#auth-screen{display:none;min-height:100vh;align-items:center;justify-content:center;flex-direction:column;gap:40px;padding:40px;position:relative;z-index:1}
.auth-card{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:52px 48px;max-width:440px;width:100%;text-align:center;box-shadow:var(--glow),0 40px 80px rgba(0,0,0,.4);animation:fadeUp .6s cubic-bezier(.34,1.56,.64,1) both}
.auth-logo{font-size:2.6rem;font-weight:800;letter-spacing:-.04em;background:linear-gradient(135deg,var(--accent) 0%,var(--lavender) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
.auth-tagline{font-family:'Newsreader',serif;font-style:italic;font-size:1rem;color:var(--muted);margin-bottom:36px;font-weight:300}
.auth-features{display:flex;flex-direction:column;gap:12px;margin-bottom:36px;text-align:left}
.auth-feature{display:flex;align-items:center;gap:12px;font-size:.82rem;color:var(--muted)}
.auth-feature-icon{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.85rem;flex-shrink:0}
.google-btn{width:100%;padding:14px;background:white;color:#1a1a1a;border:none;border-radius:10px;font-family:'Syne',sans-serif;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:transform .2s,box-shadow .2s}
.google-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
.google-icon{width:18px;height:18px}
.privacy-note{font-family:'JetBrains Mono',monospace;font-size:.62rem;color:var(--muted);margin-top:16px;opacity:.6}
#app{display:none;min-height:100vh;position:relative;z-index:1}
.sidebar{position:fixed;left:0;top:0;bottom:0;width:260px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;z-index:51;padding:28px 0;transition:transform .3s cubic-bezier(.4,0,.2,1)}
.sidebar-close-btn{display:none;position:absolute;top:14px;right:12px;background:var(--surface2);border:1px solid var(--border);color:var(--muted);border-radius:8px;width:32px;height:32px;align-items:center;justify-content:center;cursor:pointer;font-size:.85rem;transition:color .2s,border-color .2s}
.sidebar-close-btn:hover{color:var(--rose);border-color:var(--rose)}
.sidebar-logo{padding:0 52px 20px 24px;font-size:1.4rem;font-weight:800;letter-spacing:-.03em;background:linear-gradient(135deg,var(--accent),var(--lavender));-webkit-background-clip:text;-webkit-text-fill-color:transparent;border-bottom:1px solid var(--border);margin-bottom:20px}
.nav-section-label{font-family:'JetBrains Mono',monospace;font-size:.58rem;text-transform:uppercase;letter-spacing:.18em;color:var(--muted);padding:0 24px 8px;margin-top:8px}
.nav-item{padding:10px 24px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .18s;font-size:.85rem;font-weight:500;color:var(--muted);border-left:2px solid transparent;margin:1px 0}
.nav-item:hover{background:var(--surface2);color:var(--text)}
.nav-item.active{background:rgba(79,142,247,.1);color:var(--accent);border-left-color:var(--accent)}
.nav-icon{font-size:1rem;width:20px;text-align:center}
.sidebar-bottom{margin-top:auto;padding:20px 24px 0;border-top:1px solid var(--border)}
.user-card{display:flex;align-items:center;gap:10px}
.user-avatar{width:32px;height:32px;border-radius:50%;border:1.5px solid var(--accent);object-fit:cover}
.user-info{flex:1;min-width:0}
.user-name{font-size:.78rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.user-email{font-size:.62rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.signout-btn{background:none;border:none;color:var(--muted);cursor:pointer;font-size:.75rem;padding:4px;transition:color .2s}
.signout-btn:hover{color:var(--rose)}
.main{margin-left:240px;min-height:100vh;padding:32px 36px}
.page{display:none}
.page.active{display:block;animation:pageIn .3s ease both}
.page-header{margin-bottom:32px;display:flex;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;gap:16px}
.page-title{font-size:2rem;font-weight:800;letter-spacing:-.03em}
.page-subtitle{font-family:'Newsreader',serif;font-style:italic;font-size:.9rem;color:var(--muted);margin-top:4px;font-weight:300}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(175px,1fr));gap:16px;margin-bottom:32px}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:22px;transition:transform .2s,border-color .2s}
.stat-card:hover{transform:translateY(-3px);border-color:rgba(79,142,247,.3)}
.stat-label{font-family:'JetBrains Mono',monospace;font-size:.62rem;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:10px}
.stat-value{font-size:2rem;font-weight:800;letter-spacing:-.04em;line-height:1;margin-bottom:6px}
.stat-change{font-size:.72rem;color:var(--muted)}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
@media(max-width:900px){.grid-2{grid-template-columns:1fr}}
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:24px}
.card-title{font-size:.9rem;font-weight:700;margin-bottom:18px;display:flex;align-items:center;gap:8px}
.mood-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.mood-day-label{font-family:'JetBrains Mono',monospace;font-size:.65rem;color:var(--muted);width:28px;text-align:right}
.mood-bar-wrap{flex:1;background:var(--surface2);height:8px;border-radius:99px;overflow:hidden}
.mood-bar{height:100%;border-radius:99px;transition:width .6s cubic-bezier(.34,1.56,.64,1)}
.mood-val{font-family:'JetBrains Mono',monospace;font-size:.65rem;color:var(--muted);width:20px}
.task-item{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--border);transition:opacity .2s}
.task-item:last-child{border-bottom:none}
.task-item.done{opacity:.45}
.task-check{width:18px;height:18px;border-radius:5px;border:1.5px solid var(--border);cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .18s;background:transparent}
.task-check.checked{background:var(--green);border-color:var(--green)}
.task-check.checked::after{content:'✓';font-size:.65rem;color:#0b0f1a;font-weight:700}
.task-text{flex:1;font-size:.84rem;line-height:1.4}
.task-item.done .task-text{text-decoration:line-through}
.priority-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.p-high{background:var(--rose)}.p-med{background:var(--amber)}.p-low{background:var(--green)}
.task-del,.task-edit{background:none;border:none;color:var(--muted);cursor:pointer;font-size:.75rem;opacity:0;transition:opacity .2s,color .2s;padding:4px}
.task-item:hover .task-del,.task-item:hover .task-edit{opacity:1}
.task-del:hover{color:var(--rose)}.task-edit:hover{color:var(--accent)}
.btn{font-family:'Syne',sans-serif;font-size:.8rem;font-weight:600;padding:10px 18px;border-radius:10px;border:1px solid var(--border);background:var(--surface2);color:var(--text);cursor:pointer;transition:all .18s;display:inline-flex;align-items:center;gap:6px}
.btn:hover{background:var(--surface);border-color:rgba(79,142,247,.3);color:var(--accent)}
.btn-primary{background:var(--accent);border-color:var(--accent);color:white}
.btn-primary:hover{background:#3a7ae0;border-color:#3a7ae0;color:white}
.btn-sm{font-family:'Syne',sans-serif;font-size:.72rem;font-weight:600;padding:5px 11px;border-radius:7px;border:1px solid var(--border);background:var(--surface);color:var(--muted);cursor:pointer;transition:all .18s}
.btn-sm:hover{color:var(--accent);border-color:var(--accent)}
.form-group{margin-bottom:16px}
.form-label{display:block;font-family:'JetBrains Mono',monospace;font-size:.65rem;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:8px}
.form-input,.form-textarea,.form-select{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px 14px;color:var(--text);font-family:'Syne',sans-serif;font-size:.85rem;outline:none;transition:border-color .2s,box-shadow .2s}
.form-input:focus,.form-textarea:focus,.form-select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(79,142,247,.12)}
.form-textarea{resize:vertical;min-height:120px;line-height:1.6;font-family:'Newsreader',serif;font-size:.95rem;font-weight:300}
.form-select option{background:var(--surface)}
.mood-picker{display:flex;gap:8px;flex-wrap:wrap}
.mood-option{padding:8px 14px;border-radius:8px;border:1.5px solid var(--border);cursor:pointer;font-size:1.1rem;transition:all .18s;background:var(--surface2);display:flex;flex-direction:column;align-items:center;gap:2px}
.mood-option span{font-size:.55rem;font-family:'JetBrains Mono',monospace;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.mood-option.selected{border-color:var(--accent);background:rgba(79,142,247,.12);transform:scale(1.05)}
.mood-option:hover{transform:scale(1.05)}
.modal-backdrop{position:fixed;inset:0;background:rgba(11,15,26,.92);z-index:200;display:none;align-items:center;justify-content:center;padding:20px}
.modal-backdrop.open{display:flex}
.modal{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:32px;max-width:520px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 40px 80px rgba(0,0,0,.5);animation:modalIn .3s cubic-bezier(.34,1.56,.64,1) both}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
.modal-title{font-size:1.2rem;font-weight:800;letter-spacing:-.02em}
.modal-close{background:none;border:none;color:var(--muted);cursor:pointer;font-size:1.2rem;line-height:1;transition:color .2s;padding:4px}
.modal-close:hover{color:var(--rose)}
.streak-display{background:linear-gradient(135deg,rgba(79,142,247,.15),rgba(124,106,247,.15));border:1px solid rgba(79,142,247,.2);border-radius:16px;padding:24px;text-align:center;margin-bottom:20px}
.streak-number{font-size:4rem;font-weight:800;letter-spacing:-.05em;background:linear-gradient(135deg,var(--accent),var(--lavender));-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1;margin-bottom:4px}
.streak-label{font-family:'JetBrains Mono',monospace;font-size:.65rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)}
.goal-item{padding:16px;background:var(--surface2);border-radius:12px;margin-bottom:10px;border:1px solid var(--border)}
.goal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.goal-name{font-size:.85rem;font-weight:600}
.goal-pct{font-family:'JetBrains Mono',monospace;font-size:.7rem;color:var(--accent)}
.goal-progress-wrap{background:var(--surface);height:6px;border-radius:99px;overflow:hidden}
.goal-progress-bar{height:100%;border-radius:99px;transition:width .5s ease}
.goal-actions{display:flex;gap:6px;margin-top:10px}
.toast-container{position:fixed;bottom:24px;right:24px;z-index:999;display:flex;flex-direction:column;gap:8px}
.toast{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px 18px;font-size:.8rem;display:flex;align-items:center;gap:10px;box-shadow:0 8px 24px rgba(0,0,0,.3);animation:toastIn .3s ease both;min-width:220px}
.toast.out{animation:toastOut .3s ease both}
.empty-state{text-align:center;padding:48px 24px;color:var(--muted)}
.empty-state .empty-icon{font-size:2.5rem;margin-bottom:12px}
.empty-state .empty-text{font-size:.85rem;margin-bottom:16px;font-family:'Newsreader',serif;font-style:italic}

/* ── COMMUNITY ───────────────────────────────────────────────── */
@media (max-width: 1200px) {
    .main {
        margin-left: 0;
    }
    .sidebar {
        transform: translateX(-100%);
    }
    .sidebar.open {
        transform: translateX(0);
    }
    .hamburger {
        display: flex;
    }
    .sidebar-close-btn {
        display: flex;
    }
}

@media (max-width: 768px) {
    .main {
        padding: 24px;
    }
    .page-title {
        font-size: 1.8rem;
    }
    .stats-grid {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    .auth-card {
        padding: 40px 24px;
    }
    .sidebar {
        width: 100%;
    }
}